#手写spring

#### 第一版：核心特性IOC、AOP的实现  
*IOC&依赖注入*
- 定义:bean的名称和对应的Class  
- 实例化:根据定义实例化一个指定class的对象，并放入factory缓存中  
- 初始化:属性变量赋值，初始化方法  
- 容器:添加、缓存、获取bean，解决循环依赖  
- 使用:直接注入即可

*AOP*
- 代理对象的创建：扫描所有bean时要把aspect切的类方法标记，实例化bean前判断是否需要创建代理对象
- before & after方法的实现：bean代理中在执行方法前，先调用aspect的before和after方法
- around 方法的实现：将被代理的bean方法丢到aspect方法的请求参数里，在aspect方法中通过methodInvoke调用
- 二级缓存若能解决循环依赖，那么为什么要用三级缓存呢？  
-- 二级缓存可以解决普通bean对象的循环依赖。  
-- 接口的实现类用jdk自带的动态代理，未实现接口则用cglib增强子类代理。
-- 但当使用jdk的动态代理对象循环依赖时，必须持有原对象的引用才能注入属性，所以此时必须用三级缓存。  
-- cglib代理解决了jdk无法注入代理对象属性的问题，增强子类的实现可以直接注入属性。  

#### 第二版：优化  
